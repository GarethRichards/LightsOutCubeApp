<Window x:Class="LightsOutCube.AboutWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:LightsOutCube"
        xmlns:models="clr-namespace:LightsOutCube.ViewModels"
        xmlns:controls="clr-namespace:LightsOutCube.Controls"        
        d:DataContext="{d:DesignInstance Type=models:AboutViewModel}"
        mc:Ignorable="d"
        Title="About LightsOutCube"
        SizeToContent="WidthAndHeight"
        ResizeMode="NoResize"
        WindowStartupLocation="CenterOwner"
        Foreground="White"
        FontFamily="Segoe UI"
        Loaded="Window_Loaded">
    <Window.Resources>
        <Style TargetType="GridViewColumnHeader">
            <EventSetter Event="Click" Handler="GridViewColumnHeader_Click"/>
        </Style>
    </Window.Resources>
    <Window.Background>
        <StaticResource ResourceKey="Gradient_DuskGlow"/>
    </Window.Background>
    <TabControl>

        <TabItem Header="About">
            <Border Padding="8" CornerRadius="6">
                <Border.Background>
                    <StaticResource ResourceKey="Gradient_DuskGlow"/>
                </Border.Background>

                <!-- grid with icon + text -->
                <Grid Width="400">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="72" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <!-- Background viewport rendering a rotating cube model -->
                    <StackPanel Grid.Column="0" Grid.Row="0"  Orientation="Vertical" VerticalAlignment="Top" >

                        <controls:CubeViewportControl  Width="72" Height="72" Scale="3.04" Axis="0,1,0.5" DurationSeconds="10" />

                    </StackPanel>
                    <Image x:Name="AppIconImage" Width="48" Height="48" Margin="0,0,12,0" VerticalAlignment="Top" Grid.Column="0" />

                    <StackPanel Grid.Column="1">
                        <TextBlock Foreground="White" Text="Lights Out Cube" FontSize="22" FontWeight="Bold" Margin="0,0,0,6"/>
                        <StackPanel  Orientation="Horizontal">
                            <TextBlock Foreground="White" Text="Version " FontSize="11" Opacity="0.9" Margin="0,0,0,12"/>
                            <TextBlock Foreground="White" Text="{Binding Version}" FontSize="11" Opacity="0.9" Margin="0,0,0,12"/>
                        </StackPanel>
                        <TextBlock Foreground="White" Text="A WPF 3D Lights Out Cube puzzle." TextWrapping="Wrap" Margin="0,0,0,12"/>
                        <TextBlock Foreground="White" Text="Written by Gareth Richards." TextWrapping="Wrap" Margin="0,0,0,12"/>
                        <TextBlock Foreground="White" Text="Credits" FontWeight="SemiBold" Margin="0,8,0,4"/>
                        <TextBlock Foreground="White" Text="• Trackball code adapted from 3DTools sample" TextWrapping="Wrap" Margin="0,0,0,2"/>
                        <TextBlock Foreground="White" Text="• Gradient themes and animations by CoPilot" TextWrapping="Wrap" Margin="0,0,0,8"/>
                        <TextBlock Foreground="White" Text="Contact / Repository" FontWeight="SemiBold" Margin="0,8,0,4"/>
                        <TextBlock Foreground="White" TextWrapping="Wrap" Opacity="0.9" Margin="0,0,0,12">
                            <Hyperlink Foreground="LightBlue" NavigateUri="http://github.com/GarethRichards/LightsOutCubeApp" RequestNavigate="Hyperlink_RequestNavigate">
                                http://github.com/GarethRichards/LightsOutCubeApp
                            </Hyperlink>
                        </TextBlock>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                            <Button x:Name="CloseButton" Foreground="White" Height="30"
                                Style="{StaticResource RoundedButtonStyle}"
                                Width="84" Padding="6,4" Margin="6,0,0,0" Click="CloseButton_Click">Close</Button>
                        </StackPanel>
                    </StackPanel>
                </Grid>
            </Border>
        </TabItem>

        <!-- High scores tab -->
        <TabItem Header="High Scores">
            <Border x:Name="HighScoresBorder" Padding="12" CornerRadius="6"
                    MinWidth="520" MinHeight="240" MaxHeight="550">
                <Border.Background>
                    <StaticResource ResourceKey="Gradient_DuskGlow"/>
                </Border.Background>

                <Grid>
                    <controls:CubeViewportControl Grid.Column="0" Grid.Row="0" Width="450" Height="450" Opacity=".35" Scale="3.04" Axis="0.5,1,0" DurationSeconds="15" />

                    <DockPanel Grid.Column="0" Grid.Row="1" LastChildFill="True">
                    
                    <controls:HighScoresView ItemsSource="{Binding HighScores}" />

                    <TextBlock x:Name="NoScoresText" Text="No high scores yet." Foreground="#BBBBBB" HorizontalAlignment="Center" VerticalAlignment="Center">
                        <TextBlock.Style>
                            <Style TargetType="TextBlock">
                                <Setter Property="Visibility" Value="Collapsed" />
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding HighScores.Count}" Value="0">
                                        <Setter Property="Visibility" Value="Visible" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </TextBlock.Style>
                    </TextBlock>
                </DockPanel>

                </Grid>
            </Border>
        </TabItem>

        <!-- Speed Runs tab -->
        <TabItem Header="Speed Runs" Height="20" VerticalAlignment="Top">
            <Border Padding="12" CornerRadius="6" 
                    MinWidth="520" MinHeight="240" MaxHeight="550">
                <Border.Background>
                    <StaticResource ResourceKey="Gradient_DuskGlow"/>
                </Border.Background>

                <Grid>

                    <controls:CubeViewportControl Grid.Column="0" Grid.Row="0" Width="450" Height="450" Opacity=".35" Scale="3.04" Axis="0,1,1" DurationSeconds="15" />

                    <DockPanel LastChildFill="True" Grid.Column="0" Grid.Row="0" HorizontalAlignment="Center">
                        <StackPanel Orientation="Vertical" >
                            <controls:SpeedRunsView ItemsSource="{Binding SpeedRuns}" MaxHeight="550"/>

                            <TextBlock x:Name="NoSpeedRunsText" Text="No speed runs recorded." Foreground="#BBBBBB" HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock.Style>
                                <Style TargetType="TextBlock">
                                    <Setter Property="Visibility" Value="Collapsed" />
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding SpeedRuns.Count}" Value="0">
                                            <Setter Property="Visibility" Value="Visible" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>
                        </StackPanel>
                    </DockPanel>
                </Grid>
            </Border>
            
        </TabItem>
    </TabControl>
</Window>
