<!-- To show this window, do this: Window w=new Window1; w.Show(); -->
<Window  
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    x:Class="LightsOutCube.MainWindow"
    Loaded="OnLoaded"
    MouseLeftButtonDown="OnClick"
    Title="Lights Out Cube">
  
  <DockPanel>
    <StackPanel>
      <Grid Width="170" Height="170">
        <Grid.Background>
          <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
            <LinearGradientBrush.GradientStops>
              <GradientStop Color="Black" Offset="0"/>
              <GradientStop Color="Red" Offset="1"/>
            </LinearGradientBrush.GradientStops>
          </LinearGradientBrush>
        </Grid.Background>
        <Viewport3D Name="myViewport2" ClipToBounds="True" Grid.Row="0" Grid.Column="0" />
        <Border Name="myElement" Background="Transparent" Grid.Row="0" Grid.Column="0" />
      </Grid>
      
      <TextBox Margin="10" Text="{Binding ElementName=CubeSize, Path=Value}"></TextBox>
      <Button Margin="10"
              Width="100"
              HorizontalAlignment="Left" Click="StopAnimation">Stop</Button>
      <Slider Name="XSlider" Maximum="360.0" Minimum="-360.0" Value="0" ValueChanged="XValueChanged" />
      <Slider Name="YSlider" Maximum="360.0" Minimum="-360.0" Value="0" ValueChanged="YValueChanged"/>
      <Slider Name="ZSlider" Maximum="360.0" Minimum="-360.0" Value="0" ValueChanged="ZValueChanged"/>
      <Slider Name="CubeSize" Maximum="5" Minimum="0" Value="3.04" />
      <Slider Name="CubeOpacity" Maximum="1.0" Minimum="0.0" Value=".5" />
      <ComboBox Name="PuzzleCombo" SelectionChanged="OnSelectionChanged"></ComboBox>
      <TextBlock Margin="10" Name="valueFromTask2"/>

    </StackPanel>
    <Grid>
      <Grid.Background>        
        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
          <LinearGradientBrush.GradientStops>
            <GradientStop Color="Black" Offset="0"/>
            <GradientStop Color="DarkBlue" Offset="1"/>
          </LinearGradientBrush.GradientStops>
        </LinearGradientBrush>
      </Grid.Background>
      <Viewport3D Name="myViewport" Focusable="True" IsHitTestVisible="True" ClipToBounds="True" Grid.Column="0" Grid.Row="0">
        <Viewport3D.Camera>
          <PerspectiveCamera x:Name="myCamera" Position="0,0,-8" UpDirection="0,1,0" LookDirection="0,0,1" FieldOfView="45" NearPlaneDistance="0.125">
          </PerspectiveCamera>
        </Viewport3D.Camera>

        <ModelVisual3D x:Name="topModelVisual3D">
          <ModelVisual3D.Content>
            <Model3DGroup>
              <DirectionalLight Color="White" Direction="0,0,1" />
            </Model3DGroup>
          </ModelVisual3D.Content>
        </ModelVisual3D>
        <ModelVisual3D>
          <ModelVisual3D.Transform>
            <Transform3DGroup x:Name="myTransformGroup" >
            </Transform3DGroup>
          </ModelVisual3D.Transform>

          <ModelVisual3D x:Name="mvModel">
            <ModelVisual3D.Children>
              <ModelVisual3D>
                <ModelVisual3D.Content>
                  <GeometryModel3D Geometry="{StaticResource CubeSide01}" Material="{StaticResource Side1Material}"/>
                </ModelVisual3D.Content>
              </ModelVisual3D>
              <ModelVisual3D>
                <ModelVisual3D.Content>
                  <GeometryModel3D Geometry="{StaticResource CubeSide02}" Material="{StaticResource Side2Material}"/>
                </ModelVisual3D.Content>
              </ModelVisual3D>
              <ModelVisual3D>
                <ModelVisual3D.Content>
                  <GeometryModel3D Geometry="{StaticResource CubeSide03}" Material="{StaticResource Side3Material}"/>
                </ModelVisual3D.Content>
              </ModelVisual3D>
              <ModelVisual3D>
                <ModelVisual3D.Content>
                  <GeometryModel3D Geometry="{StaticResource CubeSide04}" Material="{StaticResource Side4Material}"/>
                </ModelVisual3D.Content>
              </ModelVisual3D>
              <ModelVisual3D>
                <ModelVisual3D.Content>
                  <GeometryModel3D Geometry="{StaticResource CubeSide05}" Material="{StaticResource Side5Material}"/>
                </ModelVisual3D.Content>
              </ModelVisual3D>
              <ModelVisual3D>
                <ModelVisual3D.Content>
                  <GeometryModel3D Geometry="{StaticResource CubeSide06}" Material="{StaticResource Side6Material}"/>
                </ModelVisual3D.Content>
              </ModelVisual3D>
              <ModelVisual3D>
                <ModelVisual3D.Content>
                  <GeometryModel3D x:Name="myCube" Geometry="{StaticResource myCube}"  Material="{StaticResource myFunkyMaterial}"/>                  
                </ModelVisual3D.Content>
              </ModelVisual3D>
            </ModelVisual3D.Children>

            <ModelVisual3D.Transform>
              <Transform3DGroup >
                <ScaleTransform3D ScaleX="{Binding ElementName=CubeSize, Path=Value}"  ScaleY="{Binding ElementName=CubeSize, Path=Value}" ScaleZ="{Binding ElementName=CubeSize, Path=Value}" />
              </Transform3DGroup >
            </ModelVisual3D.Transform>
          </ModelVisual3D>

        </ModelVisual3D>
<!--        <Viewport3D.Triggers>
          <EventTrigger RoutedEvent="Viewport3D.Loaded">
            <BeginStoryboard>
              <Storyboard>
                <DoubleAnimation
                 Storyboard.TargetName="myGradientBrush" 
                 Storyboard.TargetProperty="Opacity" 
                 Duration="0:0:2" 
                 To="0.1" 
                 AutoReverse="True" RepeatBehavior="Forever" />

              </Storyboard>
            </BeginStoryboard>
          </EventTrigger>
        </Viewport3D.Triggers> -->
      </Viewport3D>
    </Grid>
   
  </DockPanel>
</Window>
